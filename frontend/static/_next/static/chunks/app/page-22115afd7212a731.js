(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1659:(e,t,a)=>{Promise.resolve().then(a.bind(a,7148))},7148:(e,t,a)=>{"use strict";a.d(t,{CharacterDetector:()=>et});var r=a(5155),s=a(1539);let n=()=>(0,r.jsxs)("header",{className:"text-center space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)(s.A,{className:"h-8 w-8 text-orange-500"}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Kid Goku vs Goten classifier"})]}),(0,r.jsxs)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:["Upload an image to find out if it shows ",(0,r.jsx)("strong",{children:"Kid Goku"})," or ",(0,r.jsx)("strong",{children:"Goten"}),". Our AI model was trained to tell them apart, even though they look almost identical."]})]});var l=a(2115),i=a(2596),o=a(9688);function c(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,o.QP)((0,i.$)(t))}let d=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:c("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});d.displayName="Card";let u=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:c("flex flex-col space-y-1.5 p-6",a),...s})});u.displayName="CardHeader";let m=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:c("text-2xl font-semibold leading-none tracking-tight",a),...s})});m.displayName="CardTitle";let g=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:c("text-sm text-muted-foreground",a),...s})});g.displayName="CardDescription";let x=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:c("p-6 pt-0",a),...s})});x.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:c("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter";var h=a(1284);let f=()=>(0,r.jsx)("section",{children:(0,r.jsxs)(d,{className:"border-blue-200 bg-blue-50/50",children:[(0,r.jsx)(u,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(h.A,{className:"h-5 w-5 text-blue-600"}),(0,r.jsx)(m,{className:"text-lg text-blue-900",children:"Why Goku vs Goten?"})]})}),(0,r.jsx)(x,{children:(0,r.jsx)("p",{className:"text-blue-800",children:"This project is a demo of my binary image classifier generator. I chose Kid Goku and Goten because they look almost the same, which makes this a tough challenge for any model. It must learn very subtle differences to tell them apart."})})]})}),p=e=>{let{message:t}=e;return(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm font-medium p-3 rounded shadow-sm max-h-32 overflow-auto text-center break-words",children:t})};var v=a(7213),j=a(6766);let b=e=>{let{selectedImage:t}=e;return(0,r.jsx)("div",{className:"relative aspect-square bg-gray-100 rounded-lg overflow-hidden border-2 border-dashed border-gray-300",children:t?(0,r.jsx)(j.default,{src:t,alt:"Selected preview image",fill:!0,className:"object-cover"}):(0,r.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(v.A,{className:"h-16 w-16 mx-auto mb-2 opacity-50"}),(0,r.jsx)("p",{className:"text-sm",children:"No image selected"})]})})})};var y=a(9869),N=a(4624),w=a(2085);let k=(0,w.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),I=l.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:l=!1,...i}=e,o=l?N.DX:"button";return(0,r.jsx)(o,{className:c(k({variant:s,size:n,className:a})),ref:t,...i})});I.displayName="Button";let R=e=>{let{fileInputRef:t}=e;return(0,r.jsxs)(I,{onClick:()=>{var e;null===(e=t.current)||void 0===e||e.click()},variant:"outline",className:"flex-1","aria-label":"Upload image",children:[(0,r.jsx)(y.A,{className:"h-4 w-4 mr-2"}),"Upload Image"]})},G=[{id:"goten",name:"Kid Goten",url:"/static/goten.png?height=400&width=400&text=Kid+Goten",description:"Goten in Dragon Ball Super"},{id:"goku",name:"Kid Goku",url:"/static/goku.png?height=400&width=400&text=Kid+Goku",description:"Goku in Dragon Ball"},{id:"piccolo",name:"Piccolo",url:"/static/piccolo.png?height=400&width=400&text=Piccolo",description:"Piccolo in Dragon Ball Z"},{id:"freezer",name:"Freezer",url:"/static/freezer.png?height=400&width=400&text=Freezer",description:"Freezer in Dragon Ball Z"}];G[0].url;let A=e=>{let{onImageSelect:t,onResultsClear:a}=e,s=e=>{t(e.url),a()};return(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Default Test Images"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:G.map(e=>(0,r.jsxs)(I,{onClick:()=>s(e),variant:"outline",size:"sm",className:"text-xs h-auto py-2 px-2 flex flex-col items-center",title:e.description,children:[(0,r.jsx)("span",{className:"font-medium",children:e.name}),(0,r.jsx)("span",{className:"text-gray-500 text-xs",children:e.description})]},e.id))})]})};class z extends Error{constructor(e){super(e),this.name="InvalidImageError"}}async function C(e){if(!["image/jpeg","image/png","image/webp"].includes(e.type))throw new z("Only JPG, PNG, or WebP images are supported.");let t=URL.createObjectURL(e);return new Promise((e,a)=>{let r=new Image;r.onload=()=>{let s=r.width<100||r.height<100,n=r.width>2e3||r.height>2e3;URL.revokeObjectURL(t),s?a(new z("Image is too small. Minimum size is ".concat(100,"x").concat(100," pixels."))):n?a(new z("Image is too large. Maximum size is ".concat(2e3,"x").concat(2e3," pixels."))):e(!0)},r.onerror=()=>{URL.revokeObjectURL(t),a(Error("Image upload failed: Unknown FileReader error"))},r.src=t})}let U=async e=>new Promise((t,a)=>{let r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=()=>{var e;a(null!==(e=r.error)&&void 0!==e?e:Error("Image upload failed: Unknown FileReader error"))},r.readAsDataURL(e)}),D=(e,t)=>{let[a,r]=(0,l.useState)(null);return{handleFileChange:(0,l.useCallback)(async a=>{var s;let n=null===(s=a.target.files)||void 0===s?void 0:s[0];if(n){a.target.value="";try{await C(n);let a=await U(n);e(a),t(),r(null)}catch(e){console.error("Upload error:",e),e instanceof z?r(e.message):r("Unexpected error while uploading the image.")}}},[e,t]),errorMessage:a,setErrorMessage:r}},F=e=>{let{selectedImage:t,onImageSelect:a,onResultsClear:s}=e,n=(0,l.useRef)(null),{handleFileChange:i,errorMessage:o,setErrorMessage:c}=D(a,s);return(0,r.jsxs)("section",{children:[(0,r.jsx)("input",{ref:n,type:"file",accept:"image/*",onChange:i,className:"hidden"}),(0,r.jsxs)(d,{children:[(0,r.jsxs)(u,{children:[(0,r.jsxs)(m,{className:"flex items-center gap-2",children:[(0,r.jsx)(v.A,{className:"h-5 w-5"}),"Test Image"]}),(0,r.jsx)(g,{children:"Upload an image or select from default options to test the detection model"})]}),(0,r.jsxs)(x,{className:"space-y-4",children:[(0,r.jsx)(b,{selectedImage:t}),o&&(0,r.jsx)(p,{message:o}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(R,{fileInputRef:n}),(0,r.jsx)(A,{onImageSelect:e=>{a(e),s(),c(null)},onResultsClear:s})]})]})]})]})},M=()=>(0,r.jsxs)("div",{className:"text-center py-8",role:"status","aria-live":"polite",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-3"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Analyzing image..."}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Running CNN inference"})]}),S=()=>(0,r.jsxs)("div",{className:"text-center py-8 text-gray-600 space-y-2",children:[(0,r.jsx)(v.A,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),(0,r.jsx)("p",{children:'Upload an image and click "Analyze Image"'})]}),E=(0,w.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function P(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:c(E({variant:a}),t),...s})}let L={Goten:{text:"✅ It's Goten!",color:"bg-green-500"},Goku:{text:"✅ It's Goku!",color:"bg-green-500"},Neither:{text:"\uD83D\uDE0F Hmm... That's not Goku or Goten",color:"bg-gray-500"},Unknown:{text:"⚠️ Detection Unavailable",color:"bg-gray-400"}},T=e=>{let{character:t}=e,{text:a,color:s}=L[["Goten","Goku","Neither"].includes(t)?t:"Unknown"];return(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)(P,{variant:"default",className:"text-lg px-4 py-2 ".concat(s),children:a})})},_=e=>{let{detected:t,confidence:a}=e,s=Math.min(Math.max(a,0),100);return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Confidence Score"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[s.toFixed(1),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ".concat(t?"bg-green-500":"bg-gray-400"),style:{width:"".concat(s,"%")}})})]})},O=e=>{let{isAnalyzing:t,results:a,selectedImage:n,errorMessage:l,onStartAnalysis:i}=e,{hasImage:o,showEmptyState:c,buttonLabel:h}=function(e,t,a){let r=null!==a;return{hasImage:r,showEmptyState:!e&&null===t,buttonLabel:r?e?"Analyzing...":"Analyze Image":"Select Image First"}}(t,a,n);return(0,r.jsxs)(d,{children:[(0,r.jsxs)(u,{children:[(0,r.jsxs)(m,{className:"flex items-center gap-2",children:[(0,r.jsx)(s.A,{className:"h-5 w-5"}),"Detection Results"]}),(0,r.jsx)(g,{children:"CNN model analysis and confidence scores"})]}),(0,r.jsxs)(x,{className:"space-y-4","aria-live":"polite",children:[l&&(0,r.jsx)(p,{message:l}),t&&(0,r.jsx)(M,{}),c&&(0,r.jsx)(S,{}),a&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(T,{character:a.character}),(0,r.jsx)(_,{detected:a.detected,confidence:a.confidence})]}),(0,r.jsx)(I,{onClick:i,disabled:!o||t,className:"w-full bg-orange-500 hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed",title:o?"":"Please select an image first",children:h})]})]})},B={baseModel:"ResNet-50 with Transfer Learning",trainingData:"400+ labeled Dragon Ball images",f1Score:"99.1% on validation set"},K=[{label:"Base Model",value:B.baseModel},{label:"Training Data",value:B.trainingData},{label:"F1-Score",value:B.f1Score}],W=()=>(0,r.jsxs)(d,{className:"border-gray-200",children:[(0,r.jsx)(u,{children:(0,r.jsx)(m,{className:"text-lg",children:"Model Architecture"})}),(0,r.jsx)(x,{children:(0,r.jsx)("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:K.map(e=>{let{label:t,value:a}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:t}),(0,r.jsx)("p",{className:"text-gray-600",children:a})]},t)})})})]}),q=()=>{let[e,t]=(0,l.useState)(null);return{selectedImage:e,updateImage:t,resetToDefault:()=>t(null)}},H=async(e,t)=>{let a=new FormData;a.append("image",t);let r=await fetch("/api/classify/".concat(e),{method:"POST",body:a});if(!r.ok)throw Error("Request to ".concat(e," failed: ").concat(r.status," ").concat(r.statusText));return await r.json()},V=e=>H("goten/",e),Z=e=>H("goku/",e),J=e=>H("goten-vs-goku/",e),Q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image.jpg",[a,r]=e.split(",");if(!a||!r)throw Error("Invalid data URL: missing metadata or base64 data.");let s=a.match(/:(.*?);/),n=null==s?void 0:s[1];if(!n)throw Error("Invalid data URL: could not extract MIME type.");let l=atob(r),i=new Uint8Array(l.length);for(let e=0;e<l.length;e++)i[e]=l.charCodeAt(e);return new File([i],t,{type:n})},X=e=>e.startsWith("data:"),$=async e=>{let t=await Y(e),[a,r]=await Promise.all([V(t),Z(t)]),s=a.prediction,n=r.prediction;if(!s&&!n)return{detected:!1,confidence:100*((a.confidence+r.confidence)/2),character:"Neither"};if(s&&!n)return{detected:!0,confidence:100*a.confidence,character:"Goten"};if(n&&!s)return{detected:!0,confidence:100*r.confidence,character:"Goku"};{let e=await J(t);return{detected:!0,confidence:100*e.confidence,character:e.character}}},Y=async e=>{if(X(e))return Q(e);let t=await fetch(e);if(!t.ok)throw Error("Image fetch failed: ".concat(t.status," ").concat(t.statusText));return new File([await t.blob()],"test-image.jpg",{type:"image/jpeg"})},ee=()=>{let[e,t]=(0,l.useState)({isAnalyzing:!1,results:null,errorMessage:null}),a=async e=>{t({isAnalyzing:!0,results:null,errorMessage:null});try{let a=await $(e);t({isAnalyzing:!1,results:a,errorMessage:null})}catch(e){console.error("Analysis error:",e),t({isAnalyzing:!1,results:null,errorMessage:"Something went wrong while analyzing the image."})}};return{...e,startAnalysis:a,clearResults:()=>{t({isAnalyzing:!1,results:null,errorMessage:null})}}},et=()=>{let{selectedImage:e,updateImage:t}=q(),{isAnalyzing:a,results:s,errorMessage:l,startAnalysis:i,clearResults:o}=ee();return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-blue-50 p-4",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,r.jsx)(n,{}),(0,r.jsx)(f,{}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsx)(F,{selectedImage:e,onImageSelect:t,onResultsClear:o}),(0,r.jsx)(O,{isAnalyzing:a,results:s,selectedImage:e,errorMessage:l,onStartAnalysis:()=>{e&&i(e)}})]}),(0,r.jsx)(W,{})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[424,441,684,358],()=>t(1659)),_N_E=e.O()}]);